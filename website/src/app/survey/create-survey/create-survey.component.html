<div class="py-4">
  <div class="card">
    <div class="card-header">
      <nav aria-label="breadcrumb">
        <ol class="breadcrumb mb-0">
          <li class="breadcrumb-item">
            <a routerLink="/surveys" class="text-decoration-none">All Surveys</a>
          </li>
          <li class="breadcrumb-item active" aria-current="page">Create</li>
        </ol>
      </nav>
    </div>
    <div class="card-body">
      <div class="alert alert-danger" role="alert" *ngIf="errorMessage">
        {{ errorMessage }}
      </div>

      <div class="row">
        <!-- Left Side: Survey Form + Builder -->
        <div class="col-md-6">
          <!-- Survey Basic Info -->
          <div class="card mb-4">
        <div class="card-header">
          <h4>Survey Information</h4>
        </div>
        <div class="card-body">
          <div class="mb-3">
            <label class="form-label" for="nameInput">Survey Name</label>
            <input [(ngModel)]="survey.name" name="name" type="text" class="form-control" id="nameInput" placeholder="Enter a name" required [disabled]="isSubmitting">
          </div>

          <div class="mb-3">
            <label class="form-label" for="commentsInput">Description (optional)</label>
            <textarea [(ngModel)]="survey.comments" name="comments" class="form-control" id="commentsInput" rows="3" placeholder="Enter a description" [disabled]="isSubmitting"></textarea>
          </div>
        </div>
      </div>

      <!-- Survey Builder -->
      <div class="card mb-4">
        <div class="card-header">
          <h4>Survey Fields</h4>
        </div>
        <div class="card-body">
          <app-survey-builder [survey]="survey" (surveyChange)="onSurveyChange($event)"></app-survey-builder>
        </div>
      </div>

        </div>

        <!-- Right Side: Complete Survey Preview -->
        <div class="col-md-6">
      <div class="card">
        <div class="card-header">
          <h4>Survey Preview</h4>
        </div>
        <div class="card-body">
          <!-- Survey Header Preview -->
          <div class="mb-4">
            <h2 *ngIf="survey.name; else noName">{{ survey.name }}</h2>
            <ng-template #noName>
              <h2 class="text-muted">Survey name will appear here</h2>
            </ng-template>
            
            <p *ngIf="survey.comments; else noDescription" class="text-muted">{{ survey.comments }}</p>
            <ng-template #noDescription>
              <p class="text-muted">Survey description will appear here</p>
            </ng-template>
          </div>

          <!-- Survey Fields Preview -->
          <app-survey-preview [survey]="survey"></app-survey-preview>
        </div>
      </div>
        </div>
      </div>
      
      <!-- Action Buttons -->
      <div class="card-footer d-flex justify-content-between">
        <button type="button" class="btn btn-secondary" (click)="cancel()" [disabled]="isSubmitting">Cancel</button>
        <button type="button" class="btn btn-primary" (click)="createSurvey()" [disabled]="isSubmitting">
          <span *ngIf="isSubmitting">Creating...</span>
          <span *ngIf="!isSubmitting">Create Survey</span>
        </button>
      </div>
    </div>
  </div>
</div>